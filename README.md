```
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—     â–ˆâ–ˆâ•—
â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘ â–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â• â•šâ•â•â•â•šâ•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•

â–ˆâ–ˆâ•—      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—        â–ˆâ–ˆâ•—
â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•    â•šâ•â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ•â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•       â–ˆâ–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ•â•â•â•â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â•šâ•â•â•â•â• â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•       â–ˆâ–ˆâ•‘
â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•    â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â•        â•šâ•â•

                        Universidad de MedellÃ­n
                        UNILEAK - Laboratorio 2026
```

"Solo estaba mirando..."

---

## DescripciÃ³n

UniLeak es un laboratorio educativo de seguridad ofensiva que simula un sistema universitario con vulnerabilidades intencionales. El participante asume el rol de un estudiante que explora el sistema; las fallas de diseÃ±o permiten una escalada progresiva sin necesidad de exploits complejos ni herramientas avanzadas.

El laboratorio estÃ¡ pensado como una cadena de descubrimientos: cada hallazgo conduce al siguiente, en un flujo narrativo que refleja cÃ³mo pequeÃ±as debilidades se combinan en un entorno real.

**Advertencia:** Todas las vulnerabilidades son intencionales. Uso exclusivamente educativo. No utilizar estas tÃ©cnicas en sistemas reales sin autorizaciÃ³n explÃ­cita.

---

## ğŸ†• Sistema Multi-Usuario

UniLeak ahora soporta **mÃºltiples usuarios simultÃ¡neos** sin interferencias entre sÃ­, ideal para despliegues en la nube donde varios estudiantes pueden trabajar al mismo tiempo.

### CaracterÃ­sticas
- âœ… **Registro de usuarios** individual
- âœ… **Aislamiento total** de datos por usuario
- âœ… **Progreso independiente** (notas, deudas, flags)
- âœ… **Sin sabotaje** entre participantes
- âœ… **Persistencia** en Vercel KV (Redis)

### Despliegue RÃ¡pido en Vercel

Para desplegar en producciÃ³n con mÃºltiples usuarios:

**ğŸ“š Ver:** `QUICKSTART.md` - GuÃ­a de 5 minutos  
**ğŸ“– Ver:** `SETUP_VERCEL.md` - DocumentaciÃ³n completa  

```bash
# 1. Sube a GitHub
git push origin main

# 2. Importa en vercel.com/new

# 3. Agrega Vercel KV desde Storage â†’ Create Database â†’ KV

# 4. Â¡Listo! Los usuarios pueden registrarse y empezar
```

---

## Requisitos

### Para uso local
- Python 3.8 o superior
- pip
- Navegador moderno (Chrome, Firefox o Edge) con DevTools (F12)

### Para despliegue en Vercel
- Cuenta de Vercel (gratuita)
- Vercel KV habilitado (incluido en plan gratuito)

Opcional para algunas pruebas: CyberChef, AperiSolve, editor de cookies o Burp Suite.

---

## InstalaciÃ³n y ejecuciÃ³n

1. Clonar o descargar el proyecto.

2. Instalar dependencias:

   ```bash
   pip install -r requirements.txt
   ```

3. Generar la imagen con esteganografÃ­a (carnet universitario y pista oculta):

   ```bash
   python create_stego_image.py
   ```

4. Colocar la foto del profesor en `static/uploads/professor.jpg` y, si aplica, configurar sus metadatos segÃºn `static/uploads/INSTRUCCIONES_FOTO_PROFESOR.txt`.

5. Ejecutar la aplicaciÃ³n:

   ```bash
   python app.py
   ```

6. Acceder en el navegador a: `http://localhost:5000`

---

## Credenciales de acceso

### Usuarios Demo (pre-configurados)

| Rol         | Usuario  | Clave     |
| ----------- | -------- | --------- |
| Estudiante  | 20261001 | 12051998  |
| Estudiante  | 20261002 | 23071999  |
| Estudiante  | 20261003 | 15031997  |
| Monitor     | 10011234 | admin2026 |
| Coordinador | 10021234 | coord2026 |

Para seguir el flujo del laboratorio se suele comenzar con el estudiante 20261001.

### Registro de Nuevos Usuarios

En el despliegue con Vercel KV, cada participante puede:
1. Hacer clic en **"Â¿No tienes cuenta? RegÃ­strate aquÃ­"**
2. Crear su propio usuario Ãºnico
3. Trabajar con su propio conjunto de datos aislado

Esto permite que mÃºltiples personas usen el lab simultÃ¡neamente sin interferir entre sÃ­.

---

## Estructura del proyecto

```
unileak-lab/
â”œâ”€â”€ app.py                      # AplicaciÃ³n Flask (rutas y lÃ³gica)
â”œâ”€â”€ create_stego_image.py       # Genera imagen con esteganografÃ­a LSB
â”œâ”€â”€ decode_stego.py             # Decodifica mensaje en profile_card.png
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ run.bat                     # Arranque rÃ¡pido (Windows)
â”œâ”€â”€ README.md                   # Este archivo
â”œâ”€â”€ SOLUCION.md                 # SoluciÃ³n completa (spoilers)
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ usuarios.csv
â”‚   â”œâ”€â”€ notas.csv
â”‚   â”œâ”€â”€ materias.csv
â”‚   â”œâ”€â”€ deudas.csv
â”‚   â””â”€â”€ revisiones.csv
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ login.html
â”‚   â”œâ”€â”€ panel_estudiante.html
â”‚   â”œâ”€â”€ panel_monitor.html
â”‚   â”œâ”€â”€ panel_academico.html
â”‚   â”œâ”€â”€ secreto_profesor.html
â”‚   â”œâ”€â”€ boveda.html
â”‚   â”œâ”€â”€ cambiar_clave.html
â”‚   â””â”€â”€ olvido_clave.html
â””â”€â”€ static/
    â”œâ”€â”€ css/style.css
    â””â”€â”€ uploads/
        â”œâ”€â”€ profile_card.png    # Imagen con esteganografÃ­a
        â”œâ”€â”€ professor.jpg       # Foto del profesor (metadatos; el usuario la aporta)
        â””â”€â”€ INSTRUCCIONES_FOTO_PROFESOR.txt
```

---

## Objetivos de aprendizaje

El laboratorio trabaja, entre otros, los siguientes conceptos:

- EsteganografÃ­a (LSB en imÃ¡genes) y gestiÃ³n de informaciÃ³n oculta
- Information disclosure (endpoints de debug expuestos)
- Bypass de validaciÃ³n solo en cliente
- Insecure Direct Object Reference (IDOR)
- Broken Access Control y escalada de privilegios
- Manejo inseguro de tokens (p. ej. Base64 sin firma)
- Falta de autorizaciÃ³n en APIs y paneles
- ExposiciÃ³n de informaciÃ³n en metadatos (EXIF/comentarios en imÃ¡genes)

---

## Flujo del laboratorio

El participante inicia como estudiante, explora el panel y la imagen del carnet, descubre endpoints internos y debilidades de validaciÃ³n, y puede acabar modificando notas, accediendo a paneles de monitor y coordinaciÃ³n, ajustando estado acadÃ©mico y financiero, y obteniendo la Ãºltima pista desde los metadatos de la foto del profesor. La fase final consiste en calcular el SHA1 de las ocho flags (en orden alfabÃ©tico) e introducirlo en la bÃ³veda para completar el lab.

Hay 8 flags en total. La documentaciÃ³n detallada de cada paso y la soluciÃ³n completa se encuentran en **SOLUCION.md**.

---

## TecnologÃ­as

- **Backend:** Flask (Python)
- **Frontend:** HTML, CSS, JavaScript
- **Datos:** CSV (datos base) + Vercel KV/Redis (progreso de usuarios)
- **ImÃ¡genes:** Pillow (PIL) para generaciÃ³n y decodificaciÃ³n de esteganografÃ­a
- **Despliegue:** Vercel con KV (Redis) para multi-usuario

---

## DocumentaciÃ³n adicional

- **SOLUCION.md:** GuÃ­a paso a paso con la soluciÃ³n completa de todos los actos, flags, rutas y hash final de la bÃ³veda. Contiene spoilers; conviene consultarlo solo tras intentar el lab o para verificaciÃ³n.
- **QUICKSTART.md:** GuÃ­a rÃ¡pida de despliegue en Vercel (5 minutos)
- **SETUP_VERCEL.md:** DocumentaciÃ³n completa de configuraciÃ³n con Vercel KV
- **IMPLEMENTACION_KV.md:** Detalles tÃ©cnicos de la arquitectura multi-usuario

---

## Aviso legal

Este proyecto es un entorno de aprendizaje controlado. Las vulnerabilidades son intencionales y estÃ¡n documentadas. El acceso no autorizado a sistemas informÃ¡ticos es un delito; estas prÃ¡cticas deben limitarse a entornos propios o autorizados. El conocimiento adquirido ha de usarse de forma responsable.

Universidad de MedellÃ­n â€“ DarkWall Lab 2026. Fines educativos y de demostraciÃ³n.
